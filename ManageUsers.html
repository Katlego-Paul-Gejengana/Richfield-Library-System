<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Manage Users - Richfield Library System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body class="bg-[#0a1f44] text-white min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="bg-blue-900 text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Logo -->
            <div class="flex items-center space-x-3">
                <img src="https://cdn.briefly.co.za/images/720/6b4cbb0e53c53f0a.jpeg?v=1" alt="Richfield Library Logo"
                    class="w-12 h-12 object-contain">
                <h1 class="text-2xl font-bold">Richfield Library System</h1>
            </div>

            <!-- Desktop Menu -->
            <div class="hidden md:flex space-x-6 items-center">
                <a href="admin.html"
                    class="flex flex-col items-center hover:bg-blue-800 px-3 py-1 rounded-lg transition">
                    <span class="material-icons">dashboard</span>
                    <span class="text-xs mt-1">Dashboard</span>
                </a>
                <a href="ManageUsers.html"
                    class="flex flex-col items-center hover:bg-blue-800 px-3 py-1 rounded-lg transition">
                    <span class="material-icons">group</span>
                    <span class="text-xs mt-1">Users</span>
                </a>
                <a href="ManageBooks.html"
                    class="flex flex-col items-center hover:bg-blue-800 px-3 py-1 rounded-lg transition">
                    <span class="material-icons">menu_book</span>
                    <span class="text-xs mt-1">Books</span>
                </a>
                <a href="Analytics.html"
                    class="flex flex-col items-center hover:bg-blue-800 px-3 py-1 rounded-lg transition">
                    <span class="material-icons">analytics</span>
                    <span class="text-xs mt-1">Analytics</span>
                </a>
                <a href="AdminProfile.html"
                    class="flex flex-col items-center hover:bg-blue-800 px-3 py-1 rounded-lg transition">
                    <span class="material-icons">account_circle</span>
                    <span class="text-xs mt-1">Profile</span>
                </a>

                <!-- Logout Button -->
                <a href="index.html"
                    class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg font-semibold text-white">
                    Logout
                </a>
            </div>

            <!-- Mobile Menu Button -->
            <button id="menu-btn" class="md:hidden text-3xl focus:outline-none">
                <span class="material-icons">menu</span>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden bg-blue-800 text-white flex flex-col space-y-2 py-4 px-6">
            <a href="admin.html" class="flex items-center space-x-2 hover:text-blue-300 transition">
                <span class="material-icons">dashboard</span><span>Dashboard</span>
            </a>
            <a href="ManageUsers.html" class="flex items-center space-x-2 hover:text-blue-300 transition">
                <span class="material-icons">group</span><span>Users</span>
            </a>
            <a href="ManageBooks.html" class="flex items-center space-x-2 hover:text-blue-300 transition">
                <span class="material-icons">menu_book</span><span>Books</span>
            </a>
            <a href="Analytics.html" class="flex items-center space-x-2 hover:text-blue-300 transition">
                <span class="material-icons">analytics</span><span>Analytics</span>
            </a>
            <a href="AdminProfile.html" class="flex items-center space-x-2 hover:text-blue-300 transition">
                <span class="material-icons">account_circle</span><span>Profile</span>
            </a>
            <a href="index.html" class="flex items-center space-x-2 hover:text-blue-300 transition">
                <span class="material-icons">logout</span><span>Logout</span>
            </a>
        </div>
    </nav>

    <!-- Page Header -->
    <header class="px-6 py-6 text-center">
        <h2 class="text-3xl font-bold mb-2">Manage Users</h2>
        <p class="text-gray-300">Edit or remove students and librarians. Use the search to find users quickly.</p>
    </header>

    <!-- Search Users -->
    <section class="px-6 max-w-3xl mx-auto mb-6">
        <input type="text" id="searchUser" placeholder="Search by email or username..."
            class="w-full px-3 py-2 rounded-lg text-gray-900">
    </section>

    <!-- Users Table -->
    <section class="px-6 max-w-6xl mx-auto flex-grow">
        <div class="overflow-x-auto">
            <table id="usersTable" class="w-full table-auto border-collapse border border-gray-100">
                <thead>
                    <tr class="bg-blue-800">
                        <th class="border border-gray-700 px-3 py-2">ID</th>
                        <th class="border border-gray-700 px-3 py-2">Username</th>
                        <th class="border border-gray-700 px-3 py-2">Email</th>
                        <th class="border border-gray-700 px-3 py-2">Role</th>
                        <th class="border border-gray-700 px-3 py-2">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dynamic rows will populate here -->
                </tbody>
            </table>
        </div>
    </section>

    <footer class="bg-[#0a1f44] text-gray-300 py-4 text-center mt-auto">
        <p>&copy; 2025 Richfield Library System</p>
    </footer>

    <!-- Scripts -->
    <script>
        // Mobile menu toggle
        const menuBtn = document.getElementById("menu-btn");
        const mobileMenu = document.getElementById("mobile-menu");

        menuBtn?.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
        });

        // Sample data
        let users = [
            { id: 1, firstName: "John", lastName: "Doe", email: "john@example.com", role: "Student" },
            { id: 2, firstName: "Jane", lastName: "Smith", email: "jane@example.com", role: "Librarian" },
            { id: 3, firstName: "Alice", lastName: "Johnson", email: "alice@example.com", role: "Student" }
        ];

        const usersTableBody = document.querySelector("#usersTable tbody");
        const searchInput = document.getElementById("searchUser");

        function renderUsers(filteredUsers = null) {
            const list = filteredUsers || users;
            usersTableBody.innerHTML = "";

            list.forEach((user, index) => {
                const row = document.createElement("tr");
                row.classList.add("text-gray-100");
                row.innerHTML = `
                    <td class="border border-gray-700 px-3 py-2">${user.id}</td>
                    <td class="border border-gray-700 px-3 py-2">${user.firstName} ${user.lastName}</td>
                    <td class="border border-gray-700 px-3 py-2">${user.email}</td>
                    <td class="border border-gray-700 px-3 py-2">${user.role}</td>
                    <td class="border border-gray-700 px-3 py-2 space-x-2">
                        <button class="edit bg-yellow-500 hover:bg-yellow-600 px-2 py-1 rounded">Edit</button>
                        <button class="delete bg-red-500 hover:bg-red-600 px-2 py-1 rounded">Delete</button>
                    </td>
                `;
                usersTableBody.appendChild(row);

                // Edit user
                row.querySelector(".edit").addEventListener("click", () => {
                    const newFirst = prompt("First Name:", user.firstName);
                    const newLast = prompt("Last Name:", user.lastName);
                    const newEmail = prompt("Email:", user.email);
                    const newRole = prompt("Role (Student/Librarian):", user.role);
                    if (newFirst && newLast && newEmail && newRole) {
                        users[index] = { ...user, firstName: newFirst, lastName: newLast, email: newEmail, role: newRole };
                        renderUsers();
                    }
                });

                // Delete user
                row.querySelector(".delete").addEventListener("click", () => {
                    if (confirm(`Are you sure you want to delete ${user.firstName} ${user.lastName}?`)) {
                        users.splice(index, 1);
                        renderUsers();
                    }
                });
            });
        }

        // Search feature
        searchInput.addEventListener("input", () => {
            const term = searchInput.value.toLowerCase();
            const filtered = users.filter(u =>
                (u.firstName + " " + u.lastName).toLowerCase().includes(term) ||
                u.email.toLowerCase().includes(term)
            );
            renderUsers(filtered);
        });

        // Initial render
        renderUsers();
    </script>

</body>

</html>